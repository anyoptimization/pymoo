{% extends "sphinx_book_theme/layout.html" %}

{# Force light theme - prevent dark mode from ever appearing #}
{% block extrahead %}
  {{ super() }}
  <script>
    // Force light theme immediately (before page renders)
    (function() {
      // Set theme to 'light' in all possible storage keys
      try {
        localStorage.setItem('theme', 'light');
        localStorage.setItem('pst-theme', 'light');
        localStorage.setItem('sphinx-book-theme-mode', 'light');
      } catch(e) {}

      // Force light theme on html element
      document.documentElement.setAttribute('data-theme', 'light');
      document.documentElement.style.colorScheme = 'light';
    })();
  </script>
{% endblock %}

{# Inject JavaScript to fix edit button URLs and enforce light theme #}
{% block footer %}
  {{ super() }}
  {% if fix_edit_urls_js %}
    {{ fix_edit_urls_js | safe }}
  {% endif %}

  <script>
    // Enforce light theme (prevent any dark mode activation)
    (function() {
      function enforceLight() {
        // Force light theme
        document.documentElement.setAttribute('data-theme', 'light');
        document.documentElement.removeAttribute('data-mode');
        document.documentElement.style.colorScheme = 'light';

        // Remove dark theme classes if any exist
        document.documentElement.classList.remove('theme-dark');
        document.body.classList.remove('theme-dark');
      }

      // Run immediately
      enforceLight();

      // Run after DOM is ready
      document.addEventListener('DOMContentLoaded', function() {
        enforceLight();

        // Disable any theme toggle buttons (be specific to avoid hiding logo)
        const themeButtons = document.querySelectorAll('.theme-switch-button, button.theme-toggle, .pst-color-mode-toggle');
        themeButtons.forEach(btn => {
          btn.style.display = 'none';
          btn.disabled = true;
        });

        // Override any click handlers on theme buttons
        document.querySelectorAll('button').forEach(btn => {
          if (btn.className && btn.className.includes('theme')) {
            btn.addEventListener('click', function(e) {
              e.preventDefault();
              e.stopPropagation();
              return false;
            }, true);
          }
        });
      });
    })();
  </script>
{% endblock %}